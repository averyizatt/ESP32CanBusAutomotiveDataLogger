; PlatformIO project config for ESP32S3 CANOnly variant
;
; Folder layout:
; - ESP32S3_CANOnly.ino   (single-source sketch, kept for Arduino IDE)
; - src/main.cpp          (PlatformIO entry that compiles the sketch)
; - data/                 (SPIFFS web assets)
;
; If your exact ESP32-S3 dev board differs, change `board = ...`.

[env:esp32s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Serial monitor
monitor_speed = 115200

; Faster uploads are nice on S3 (adjust if you see upload errors)
upload_speed = 921600

; SPIFFS for serving the HTML UI
board_build.filesystem = spiffs

; Libraries used by the sketch
lib_deps =
  https://github.com/coryjfowler/MCP_CAN_lib.git
  links2004/WebSockets @ ^2.4.2
  bblanchon/ArduinoJson @ ^7.2.1
  adafruit/Adafruit GFX Library @ ^1.11.11
  adafruit/Adafruit SSD1306 @ ^2.5.13

; USB CDC (optional). If you don't want USB CDC or it causes issues, you can remove these.
build_flags =
  -D ARDUINO_USB_CDC_ON_BOOT=1
  -D ARDUINO_USB_MODE=1

; Notes:
; - SD logging uses SD.h from the Arduino-ESP32 core.
; - ESP-NOW uses esp_now / esp_wifi from the Arduino-ESP32 core.

; Windows convenience environment (explicit COM port + USB CDC off)
; Use this if PlatformIO doesn't auto-pick the right serial port.
[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

upload_protocol = esptool
upload_port = COM7
monitor_port = COM7
monitor_speed = 115200

upload_speed = 921600
board_build.filesystem = spiffs

lib_deps =
  https://github.com/coryjfowler/MCP_CAN_lib.git
  links2004/WebSockets @ ^2.4.2
  bblanchon/ArduinoJson @ ^7.2.1
  adafruit/Adafruit GFX Library @ ^1.11.11
  adafruit/Adafruit SSD1306 @ ^2.5.13

build_flags =
  -D ARDUINO_USB_CDC_ON_BOOT=0
